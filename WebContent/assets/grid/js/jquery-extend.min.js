
window.iSS={constants:{dataType:{undef:"undefined",string:"string","boolean":"boolean",number:"number",obj:"object",func:"function",array:"[object Array]"},tagName:{input:"INPUT",div:"DIV",textarea:"TEXTAREA"},event:{mousemove:"mousemove",mousedown:"mousedown",mouseup:"mouseup",click:"click",dblclick:"dblclick",keydown:"keydown",keyup:"keyup",keypress:"keypress",propertychange:"propertychange",input:"input",change:"change",paste:"paste"},inputType:{button:"button",checkbox:"checkbox",file:"file",hidden:"hidden",image:"image",password:"password",radio:"radio",reset:"reset",submit:"submit",text:"text"},textRange:{unit:{character:"character",word:"word",sentence:"sentence",textedit:"textedit"}},regExp:{dblChar:/[^\x00-\xff]/g,email:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,pInteger:/^[1-9]\d*$/,nInteger:/^-[1-9]\d*$/,integer:/^-?[1-9]\d*$/,nNInteger:/^[1-9]\d*|0$/,nPInteger:/^-[1-9]\d*|0$/,pFloat:/^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$/,nFloat:/^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$/,nNFloat:/^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$/,nPFloat:/^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$/}},isArray:function(obj){return obj?Object.prototype.toString.call(obj)===this.constants.dataType.array:false;},length:function(str,dbl){dbl=dbl===true?true:false;if(typeof str===this.constants.dataType.string){var match=str.match(this.constants.regExp.dblChar);return str.length+(dbl===true&&match?match.length:0);}
return 0;},getInput:function(formId){var arr=[],that=this;(formId?$("#"+formId).find("input,textarea"):$("input,textarea")).each(function(){if(this.type===that.constants.inputType.text||this.type===that.constants.inputType.password||this.tagName===that.constants.tagName.textarea){arr.push(this);}});return $(arr);},getSelection:function(){var result={};if($.browser.msie){var rng=document.selection.createRange(),selectionLength=rng.text.length;result.text=rng.text;rng.moveStart(this.constants.textRange.unit.character,-document.activeElement.value.length);result.end=rng.text.length;result.start=rng.text.length-selectionLength;rng.moveStart(this.constants.textRange.unit.character,result.end-selectionLength);}else{this.getInput().each(function(){if(this.selectionStart<this.selectionEnd&&this.selectionEnd>0){result.start=this.selectionStart;result.end=this.selectionEnd;result.text=this.value.substring(this.selectionStart,this.selectionEnd);this.selectionStart=this.selectionEnd=0;return false;}});}
return result;},cancelKey:function(e){e=e||window.event;e.keyCode=0;if($.browser.msie){e.returnValue=false;}else if(e.preventDefault){e.preventDefault();}
return false;},maxlength:function(parentId,dbl){var that=this,temp={};this.getInput(parentId).each(function(e){$(this).bind(that.constants.event.keydown,function(){temp.preValue=this.value;$.extend(temp,that.getSelection());temp.beforeValue=this.value.substr(0,temp.selectionStart);temp.afterValue=this.value.substr(temp.end);}).bind(that.constants.event.keypress,function(e){if(!that.getSelection().text&&that.length(this.value,dbl)>=this.maxlen){return that.cancelKey(e);}}).bind(that.constants.event.paste,function(e){if(!that.getSelection().text&&that.length(this.value,dbl)>=this.maxlen){return that.cancelKey(e);}});this.oninput=this.onpropertychange=function(){if(that.length(this.value,dbl)>this.maxlen){var text=this.value.substr(0,this.maxlen);while(that.length(text,dbl)>this.maxlen){text=text.substr(0,text.length-1);}
this.value=text;}}});},formatInput:function(formId){$("#"+formId+" :input").each(function(){this.onblur=function(){this.value=$.trim(this.value);}});},cbc:function(obj,objs){if(typeof obj===this.constants.dataType.string){obj=$("#"+obj);}else{obj=$(obj);}
if(typeof objs===this.constants.dataType.string){objs=$("input[type='checkbox'][name='"+objs+"']");}else{objs=$(objs);}
if(obj[0]&&obj[0].type===this.constants.inputType.checkbox){obj.click(function(){objs.attr('checked',this.checked);});objs.click(function(){obj.attr('checked',true);objs.each(function(){if(!this.checked){obj.attr('checked',false);return false;}});});}}};